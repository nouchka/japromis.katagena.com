include:
  - project: 'katagena/templates'
    file: 'ci/global.yml'

variables:
  EMAIL: "ja.promis@katagena.com"
  PHONE: "xxxxxxxxxx"
  ADDRESS: "Bergerac"
  OUTPUT_TEMPLATE: "kendall"
  TEMPLATE_GIT: "https://github.com/nouchka/jsonresume-theme-kendall.git"
  RESUME_FILE: "public.json"

generate-resume:
  stage: build
  image:
    name: nouchka/hackmyresume
    entrypoint: [""]
  script:
    - mkdir -p public/ pdf/
    - cp favicon.ico public/
    - cp fr.json public.json
    - /start.sh
    - cp index.html public/
    - export PHONE=${PROFESSIONNAL_PHONE}
    - export RESUME_FILE=fr.json
    - /start.sh
    - cp index.pdf pdf/japromis-cv.pdf
    - export RESUME_FILE=resume.json
    - /start.sh
    - cp index.pdf pdf/japromis-resume.pdf
  artifacts:
    paths:
    - public
    - pdf
  rules:
    - if: $CI_COMMIT_BRANCH == $CI_DEFAULT_BRANCH
